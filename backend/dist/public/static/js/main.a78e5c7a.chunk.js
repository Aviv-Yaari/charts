(this["webpackJsonpsc-practice"]=this["webpackJsonpsc-practice"]||[]).push([[0],{71:function(e,n,t){"use strict";t.r(n);var r,a,c,o=t(34),s=t.n(o),u=t(4),i=t.n(u),p=t(9),l=t(10),d=t(2),f=t(35),b=t(7),j=t(5),h=j.c.div(r||(r=Object(b.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: fixed;\n  top: 80px;\n  left: 50%;\n  transform: translate(-50%, 0);\n  padding: 10px;\n  background-color: ",";\n  width: 100%;\n  max-width: 350px;\n  border-radius: 4px;\n  box-shadow: 0 0 3px 0 #c9c9c9;\n"])),(function(e){return"error"===e.type?"#ffd7db":"#c4ffb5"})),g=["title","titleId"];function x(){return x=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},x.apply(this,arguments)}function O(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function v(e,n){var t=e.title,r=e.titleId,o=O(e,g);return d.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",ref:n,"aria-labelledby":r},o),t?d.createElement("title",{id:r},t):null,a||(a=d.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),c||(c=d.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})))}var m,w,y,k,S,C=d.forwardRef(v),E=(t.p,j.c.button(m||(m=Object(b.a)(["\n  padding: 10px 16px;\n  border-radius: 4px;\n  font-weight: 700;\n  text-align: center;\n  cursor: pointer;\n  font-family: inherit;\n  font-size: 0.9em;\n  ","\n"])),(function(e){return e.disabled&&Object(j.b)(w||(w=Object(b.a)(["pointer-events: none;"])))}))),L=Object(j.c)(E)(y||(y=Object(b.a)(["\n  border: 1px solid #1dbf73;\n  background: #1dbf73;\n  color: #fff;\n  &:hover {\n    border-color: #19925a;\n    background: #19925a;\n  }\n"]))),I=Object(j.c)(E)(k||(k=Object(b.a)(["\n  background: #fff;\n  color: #1dbf73;\n  border: 1px solid #1dbf73;\n  &:hover {\n    color: #fff;\n    background: #1dbf73;\n  }\n"]))),z=j.c.button(S||(S=Object(b.a)(["\n  padding: 3px;\n  background: transparent;\n  border: none;\n  border-radius: 50%;\n  display: flex;\n  cursor: pointer;\n  &:hover {\n    background: #b1b1b128;\n  }\n"]))),T=t(3);function D(e){var n=e.alert,t=e.onClose;return Object(d.useEffect)((function(){var e=Object(f.setTimeout)(t,3e3);return function(){return clearTimeout(e)}}),[t]),Object(T.jsxs)(h,{type:n.type,children:[Object(T.jsx)("span",{children:n.message}),Object(T.jsx)(z,{onClick:t,children:Object(T.jsx)(C,{})})]})}var P,R,U,A=t(39),J=Object(j.a)(P||(P=Object(b.a)(["\n  ","\n\n  * {\n    box-sizing: border-box;\n  }\n\n  body {\n      font-family: 'Roboto', sans-serif;\n      line-height: 1.5;\n  }\n  \n  h1,h2 {\n    font-weight: 700;\n    font-size: 1.5em;\n  }\n\n"])),A.a),G=j.c.div(R||(R=Object(b.a)(["\n  display: grid;\n  min-height: 100vh;\n  place-content: center;\n  background: #f7f7f7;\n"]))),B=j.c.header(U||(U=Object(b.a)(["\n  position: fixed;\n  top: 0;\n  right: 0;\n  left: 0;\n  padding: 20px;\n  background: #fff;\n  border-bottom: 1px solid #e4e5e7;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"])));function F(e){var n=e.user,t=e.onLogout;return Object(T.jsxs)(B,{children:[Object(T.jsx)("h1",{children:"Charts"}),n&&Object(T.jsx)(I,{onClick:t,children:"Logout"})]})}var M,N=t(11),W=j.c.main(M||(M=Object(b.a)(["\n  background: #fff;\n  padding: 20px;\n  width: 80vw;\n"]))),q=t(41),H=t(6),V=function(e){var n=Object(d.useState)(!1),t=Object(l.a)(n,2),r=t[0],a=t[1],c=Object(d.useState)(null),o=Object(l.a)(c,2),s=o[0],u=o[1],f=Object(d.useCallback)(function(){var n=Object(p.a)(i.a.mark((function n(t){var r,c,o,s=arguments;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:"An error occured",c=s.length>2?s[2]:void 0,n.prev=2,a(!0),n.next=6,t();case 6:return o=n.sent,a(!1),c&&e({message:c,type:"success"}),n.abrupt("return",o);case 12:n.prev=12,n.t0=n.catch(2),u(n.t0),e({message:r,type:"error"}),a(!1);case 17:case"end":return n.stop()}}),n,null,[[2,12]])})));return function(e){return n.apply(this,arguments)}}(),[e]);return{fetchData:f,isLoading:r,error:s}},K=t(40),Q=t.n(K).a.create({withCredentials:!0}),X="/api/";function Y(e){return Z.apply(this,arguments)}function Z(){return Z=Object(p.a)(i.a.mark((function e(n){var t,r,a,c,o,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:"GET",r=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=2,e.next=5,Q({url:"".concat(X).concat(n),method:t,data:r,params:"GET"===t?r:null});case 5:return a=e.sent,e.abrupt("return",a.data);case 9:throw e.prev=9,e.t0=e.catch(2),o=(null===(c=e.t0.response)||void 0===c?void 0:c.statusText)||"An error occured",new Error(o);case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),Z.apply(this,arguments)}var $=function(e,n){return Y(e,"GET",n)},_=function(e,n){return Y(e,"POST",n)},ee=function(){var e=Object(p.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$("point");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne={get:ee},te=function(e,n){var t=Object(d.useRef)();Object(d.useEffect)((function(){t.current=e}),[e]),Object(d.useEffect)((function(){var e=setInterval((function(){return t.current&&t.current()}),n);return function(){return clearInterval(e)}}),[n])},re=(t(70),t(72));function ae(e){var n=e.setAlert,t=V(n),r=t.fetchData,a=t.error,c=Object(d.useState)([]),o=Object(l.a)(c,2),s=o[0],u=o[1],f=Object(d.useState)([]),b=Object(l.a)(f,2),j=b[0],h=b[1],g=Object(d.useState)([]),x=Object(l.a)(g,2),O=x[0],v=x[1],m=Object(d.useState)([]),w=Object(l.a)(m,2),y=w[0],k=w[1];te((function(){var e=s.reduce((function(e,n){return e.labels.push(n.timestamp),e.dataset1.push(n.num1),e.dataset2.push(n.num2),e}),{labels:[],dataset1:[],dataset2:[]}),n=e.labels,t=e.dataset1,r=e.dataset2;h(n),v(t),k(r)}),1e3),te(Object(p.a)(i.a.mark((function e(){var n,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,r(ne.get);case 4:return n=e.sent,e.next=7,r(ne.get);case 7:if(t=e.sent,n&&t){e.next=10;break}return e.abrupt("return");case 10:u((function(e){var r=Object(N.a)(e);return e[0]&&Object(re.a)(Date.now(),e[0].timestamp)>180&&r.shift(),r.push({timestamp:Date.now(),num1:n.num,num2:t.num}),r}));case 11:case"end":return e.stop()}}),e)}))),2500);var S={labels:j,datasets:[{borderWidth:1,data:O,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)",pointRadius:0},{borderWidth:1,data:y,borderColor:"rgb(99, 128, 255)",backgroundColor:"rgba(109, 99, 255, 0.5)",pointRadius:0}]};return Object(T.jsx)(W,{children:Object(T.jsx)(q.a,{options:{responsive:!0,animation:{duration:0},scales:{x:{type:"time",time:{unit:"second",stepSize:10,displayFormats:{second:"hh:mm:ss"}}}},plugins:{legend:{display:!1}}},data:S})})}H.d.register(H.c,H.i,H.k,H.h,H.o,H.p,H.q,H.f);var ce,oe,se=t(8),ue=t(13),ie=j.c.form(ce||(ce=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  width: 100vw;\n  max-width: 300px;\n  gap: 10px;\n  background: #fff;\n  box-shadow: 0 0 3px 0 #0003;\n  padding: 20px;\n  input:last-of-type {\n    margin-bottom: 10px;\n  }\n  input:first-of-type {\n    margin-top: 10px;\n  }\n"]))),pe=j.c.input(oe||(oe=Object(b.a)(["\n  outline: none;\n  border: 1px solid #c5c6c9;\n  border-radius: 4px;\n  color: #404145;\n  padding: 8px 12px;\n  width: 100%;\n  transition: border-color 0.15s ease-in-out;\n  font-family: inherit;\n  font-size: 0.9em;\n  &:hover {\n    border-color: #95979d;\n  }\n"])));function le(e){var n=e.onLogin,t=e.isLoading,r=Object(d.useState)({username:"",password:""}),a=Object(l.a)(r,2),c=a[0],o=a[1],s=function(){var e=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n(c.username,c.password);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(e){var n=e.target,t=n.name,r=n.value;o((function(e){return Object(ue.a)(Object(ue.a)({},e),{},Object(se.a)({},t,r))}))};return Object(T.jsxs)(ie,{onSubmit:s,children:[Object(T.jsx)("h2",{children:"Log in"}),Object(T.jsx)(pe,{name:"username",type:"text",placeholder:"Username",onChange:u}),Object(T.jsx)(pe,{name:"password",type:"password",placeholder:"Password",onChange:u}),Object(T.jsx)(L,{disabled:t,children:t?"Logging in..":"Continue"}),Object(T.jsx)(I,{disabled:t,type:"button",onClick:function(){return n("username","password")},children:"Easy login - for dev purposes"})]})}var de=function(){var e=Object(p.a)(i.a.mark((function e(n,t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("auth/login",{username:n,password:t});case 2:return ge(r=e.sent),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(p.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sessionStorage.clear(),e.next=3,_("auth/logout");case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(p.a)(i.a.mark((function e(n,t,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("auth/signup",{username:n,fullname:t,password:r});case 2:return ge(a=e.sent),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),je=function(){var e=Object(p.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$("auth/current");case 2:return(n=e.sent)?ge(n):sessionStorage.clear(),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he={login:de,logout:fe,signup:be,getCurrentUser:function(){try{var e=sessionStorage.getItem("user");return e?JSON.parse(e):null}catch(n){return null}},reloadUser:je};function ge(e){sessionStorage.setItem("user",JSON.stringify(e))}var xe=function(){var e=Object(d.useState)(null),n=Object(l.a)(e,2),t=n[0],r=n[1],a=Object(d.useState)(he.getCurrentUser()),c=Object(l.a)(a,2),o=c[0],s=c[1],u=V(r),f=u.fetchData,b=u.isLoading;Object(d.useEffect)((function(){f(he.reloadUser).then(s)}),[f]);var j=function(){var e=Object(p.a)(i.a.mark((function e(n,t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f((function(){return he.login(n,t)}),"Could not login","Logged in successfuly");case 2:r=e.sent,s(r);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(J,{}),Object(T.jsxs)(G,{children:[Object(T.jsx)(F,{user:o,onLogout:function(){f(he.logout).then(s)}}),o?Object(T.jsx)(ae,{setAlert:r}):Object(T.jsx)(le,{onLogin:j,isLoading:b}),t&&Object(T.jsx)(D,{onClose:function(){return r(null)},alert:t})]})]})};s.a.render(Object(T.jsx)(xe,{}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.a78e5c7a.chunk.js.map